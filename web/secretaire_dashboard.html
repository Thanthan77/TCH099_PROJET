<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Tableau de bord - Secr√©taire</title>
  <link rel="stylesheet" href="css/secretaire_dashboard.css">
  <script src="script/secretaire_dashboard.js" defer></script>
  <script src="script/get_handle_data.js" defer></script>
</head>

<body>

  <header>
    <div class="logo-container">
      <img src="image/logo.png" alt="Logo FIX-SANT√â" class="logo">
      <h1>Clinique VITALIS ‚Äì Espace Secr√©taire</h1>
    </div>
    <div class="user-menu-container">
      <img src="image/menu.png" alt="Menu" class="user-menu-icon" onclick="toggleUserMenu()" />
      <div class="user-dropdown" id="userDropdown">
        <a href="profile.html" id="btn-profile">Acc√©der au profil</a>
        <a href="reinitialiser_mdp.html" id="btn-password">Changer mot de passe</a>
        <a href="index.html" id="btn-logout">Se d√©connecter</a>
      </div>
    </div>
  </header>

  <nav class="tabs">
    <button onclick="showTab('rdv')">Rendez-vous</button>
    <button onclick="showTab('creation')">Nouveau rendez-vous</button>
    <button onclick="showTab('patients')">Informations patients</button>
  </nav>

  <main>
    <!-- Section RDV -->
    <section id="rdv" class="tab-content">
      <div class="rdv-header">
        <h2 class="rdv-title">Les rendez-vous</h2>
        <img src="image/filter.png" alt="Filtrer" class="filtre-icon"/>
      </div>

      <div class="rdv-filter hidden" id="filtreSectionRdv">
        <input type="text" id="filtreNomPatientRdv" placeholder="Nom du patient">
        <input type="text" id="filtreNomProRdv" placeholder="Nom du professionnel">
        <select id="filtreServiceRdv">
          <option value="">-- Tous les services --</option>
          <option value="Consultation g√©n√©rale">Consultation g√©n√©rale</option>
          <option value="Suivi de grossesse">Suivi de grossesse</option>
          <option value="Suivi de maladies chroniques">Suivi de maladies chroniques</option>
          <option value="D√©pistage ITSS">D√©pistage ITSS</option>
          <option value="Vaccination">Vaccination</option>
          <option value="Pr√©l√®vement sanguin / test urinaire">Pr√©l√®vement sanguin / test urinaire</option>
          <option value="Urgence mineure">Urgence mineure</option>
        </select>
        <input type="date" id="filtreDateRdv" placeholder="Date du rendez-vous">
        <button onclick="filtrerRendezVous()">Rechercher</button>
        <button onclick="reinitialiserFiltreRdv()">R√©initialiser</button>
      </div>

      <table>
        <thead>
          <tr>
            <th>Date</th><th>Heure</th><th>Patient</th><th>Professionnel</th><th>Service</th><th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            
          </tr>
        </tbody>
      </table>
    </section>


    <section id="creation" class="tab-content hidden">
      <h2>Suivis</h2>

      <label>Nom du patient :</label>
      <input type="text" id="nomPatient" autocomplete="off">
      <ul id="listeDeroulantePatients" class="dropdown-patient hidden"></ul>

      <label>Num√©ro d'assurance maladie :</label>
      <input type="text" id="assurancePatient" oninput="rechercherPatientParAssurance()">

      <label>Service :</label>
      <select id="service" onchange="mettreAJourProfessionnelsSuivi()">
        <option value="">-- S√©lectionnez un service --</option>
        <option value="Consultation g√©n√©rale">Consultation g√©n√©rale</option>
        <option value="Suivi de grossesse">Suivi de grossesse</option>
        <option value="Suivi de maladies chroniques">Suivi de maladies chroniques</option>
        <option value="D√©pistage ITSS">D√©pistage ITSS</option>
        <option value="Vaccination">Vaccination</option>
        <option value="Pr√©l√®vement sanguin / test urinaire">Pr√©l√®vement sanguin / test urinaire</option>
        <option value="Urgence mineure">Urgence mineure</option>
      </select>

        <label>Professionnel :</label>
        <select id="professionnel" disabled>
          <option value="">-- S√©lectionnez un service d'abord --</option>
        </select>

      <label>Date :</label>
      <input type="date">

      <label>Heure :</label>
      <input type="time">

      <button>Cr√©er le rendez-vous</button>
    </section>

<!-- ü™ü Modal de s√©lection de patient en cas de doublon -->
<div id="popupSelectionPatient" class="hidden" onclick="fermerPopupPatient()">
  <div class="popup-content" onclick="event.stopPropagation()">
    <h3>Plusieurs patients trouv√©s</h3>
    <ul id="listePatients"></ul>
    <button onclick="fermerPopupPatient()">Annuler</button>
  </div>
</div>



    <!-- Section patients -->
    <section id="patients" class="tab-content hidden">
      <h2>Informations des patients</h2>

      <div class="filtre-header">
        <img src="image/filter.png" alt="Filtrer" class="filtre-icon"/>
      </div>

      <div class="patient-filter hidden" id="filtreSection">
        <input type="text" id="filtrePrenom" placeholder="Pr√©nom">
        <input type="text" id="filtreNom" placeholder="Nom">
        <input type="date" id="filtreDateNaissance">
        <input type="text" id="filtreAssurance" placeholder="Carte d'assurance maladie">
        <button onclick="filtrerPatients()">Rechercher</button>
        <button onclick="reinitialiserFiltres()">R√©initialiser</button>
      </div>

      <table>
        <thead>
          <tr>
            <th>Pr√©nom</th><th>Nom</th><th>Date de naissance</th><th>Num√©ro d'assurance maladie</th><th>Num√©ro de t√©l√©phone</th><th>Courriel</th>
          </tr>
        </thead>
        <tbody id="table-patients"></tbody>
      </table>
    </section>

    <div id="popupModification" class="hidden" onclick="fermerPopup()">
      <div class="popup-content" onclick="event.stopPropagation()">
        <h3>Modifier le rendez-vous</h3>

        <label for="popupNomPatient">Nom :</label>
        <input id="popupNomPatient" type="text" disabled>

        <label for="popupAssurancePatient">Num√©ro d'assurance maladie :</label>
        <input id="popupAssurancePatient" type="text" disabled>

        <label for="popupService">Service :</label>
        <select id="popupService" onchange="mettreAJourProfessionnelsPopup()"></select>


        <label for="popupProfessionnel">Professionnel :</label>
        <select id="popupProfessionnel"></select>

        <label for="popupDate">Jour :</label>
        <input type="date" id="popupDate">

        <label for="popupHeure">Heure :</label>
        <input type="time" id="popupHeure">

        <input type="hidden" id="popupNumRdv">

        <button onclick="validerModification()">Valider</button>
        <button onclick="fermerPopup()">Annuler</button>
      </div>
    </div>

  </main>
</body>
</html>
